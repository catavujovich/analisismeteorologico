---
title: "uso_paquete"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{uso_paquete}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Cargar paquetes necesarios
```{r setup}
library(analisismeteorologico)
library(dplyr)
library(tidyverse)
library(lubridate)
```


## 1. INTRODUCCIÓN
El paquete analisismeteorologico fue desarrollado para facilitar la
descarga, limpieza, combinación y análisis de datos provenientes de distintas
estaciones meteorológicas.

En esta viñeta se muestran, paso a paso, las funciones principales del paquete
y cómo utilizarlas de manera integrada.

## 2. CARGAR LOS DATOS DE UNA FUNCIÓN

La función **leer_estacion()** permite descargar o leer desde un archivo local
los datos correspondientes a una estación meteorológica específica o varias a la vez.

Esta función realiza varias tareas automáticamente:

- Valida el ID de estación

- Crea la carpeta si no existe

- Descarga el archivo si no está disponible dentro de la carpeta /datos

- Lee los datos y devuelve un data.frame con la información de la estación.

**Ejemplo de uso:**

* Para cargar una estacion
```{r}
NH0098 <- leer_estacion("NH0098", "datos/NH0098.csv")
head(NH0098)

```

Esta salida tambien muestra las primeras filas del dataset de ejemplo para entender
la estructura de las variables.

* Para cargar varias estaciones:
```{r}
todas_estaciones <- dplyr::bind_rows(
  leer_estacion("NH0437", "datos/NH0437.csv"),
  leer_estacion("NH0472", "datos/NH0472.csv"),
  leer_estacion("NH0098", "datos/NH0098.csv")
)

head(todas_estaciones)

```


## 3. TABLA CON RESUMEN DE TEMPERATURA
La función **tabla_resumen_temperatura()** permite obtener un resumen estadístico completo de la temperatura registrada en una o varias estaciones meteorológicas.

Esta función automatiza todo el proceso:

- Descarga los datos si no están disponibles

- Lee cada archivo y lo combina en un único data frame

- Calcula estadísticas descriptivas clave

- Devuelve un dataframe con la información resumida por estación

**¿Qué estadísticas calcula?**

Para cada estación, la función calcula:

Estadística	Descripción
n ->	Cantidad de observaciones válidas (sin NA)
minimo -> Temperatura mínima registrada
maximo ->	Temperatura máxima registrada
media ->	Promedio de temperatura
mediana ->	Temperatura central del conjunto
sd ->	Desvío estándar 

* Tabla resumen para una sola estación
```{r}
resumen_1 <- tabla_resumen_temperatura(
  estaciones = c("NH0098"),
  carpeta = "datos"
)
```

* Tabla resumen para varias estaciones:
```{r}
resumen_2 <- tabla_resumen_temperatura(
  estaciones = c("NH0098", "NH0437", "NH0472"),
  carpeta = "datos"
)
```


* Comparar entre dos estaciones 

```{r}
resumen_2 <- tabla_resumen_temperatura(
  estaciones = c("NH0098", "NH0437"),
  carpeta = "datos"
)
resumen_2

```


* Tabla con TODAS las estaciones

```{r}
resumen_todas <- tabla_resumen_temperatura(
  estaciones = c("NH0472", "NH0910", "NH0046", "NH0098", "NH0437")
)

resumen_todas
```


## 4. GRÁFICOS 

La función **grafico_temperatura_mensual()** permite visualizar de manera clara la evolución de la temperatura promedio mensual registrada en una o varias estaciones meteorológicas.

* Gráfico para una sola estación
```{r}
# Cargar la estación NH0098
datos_NH0098 <- leer_estacion("NH0098", "datos/NH0098.csv")

# Generar el gráfico de temperatura mensual
grafico <- grafico_temperatura_mensual(
  datos = datos_NH0098,
  colores = "darkgreen",
  titulo = "Temperatura mensual NH0098"
)

# Mostrar el gráfico
print(grafico)
```

* Grafico con color y titulo por defecto:
```{r}
grafico <- grafico_temperatura_mensual(datos_NH0098)

print(grafico)

```


* Comparación entre dos estaciones 
```{r}
# Cargar datos de dos estaciones
estaciones <- dplyr::bind_rows(
  leer_estacion("NH0437", "datos/NH0437.csv"),
  leer_estacion("NH0472", "datos/NH0472.csv")
)

# Generar gráfico comparativo
grafico_comparacion <- grafico_temperatura_mensual(
  datos = estaciones,
  colores = c("tomato", "steelblue"),
  titulo = "Comparación de temperatura mensual: NH0437 y NH0472"
)

# Mostrar el gráfico
print(grafico_comparacion)
```


* Gráfico que incluya todas las estaciones

```{r}
todos <- dplyr::bind_rows(
  leer_estacion("NH0437", "datos/NH0437.csv"),
  leer_estacion("NH0472", "datos/NH0472.csv"),
  leer_estacion("NH0910", "datos/NH0910.csv"),
  leer_estacion("NH0046", "datos/NH0046.csv"),
  leer_estacion("NH0098", "datos/NH0098.csv")
)

grafico_temperatura_mensual(
  todos,
  colores = c("red", "blue", "green", "purple", "orange"),
  titulo = "Temperatura mensual – todas las estaciones"
)
```


**Autores:**\
*Catalina Vujovich*\
